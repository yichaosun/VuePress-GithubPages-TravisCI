name: "fetch"

on:
  schedule:
    - cron: '0 6 * * *'
  push:

jobs:
  job_1:
    name: fetch message and assemble
    runs-on:  ubuntu-latest

    steps:
      - uses: actions/checkout@v2
        with:
          ref: publishment
      - name: Setup Python environment
        uses: actions/setup-python@v2
        with:
          python-version: '3.8'
      - name: Install Dependence
        run: pip install -r ${{ github.workspace }}/flutter_demo/requirements.txt
      - name: Run pa.python
        run: |
          python ${{ github.workspace }}/flutter_demo/main.py
      - name: list
        run: ls
      - name: Upload to this repo
        run: |
          git config --global user.name "github-actions" # Change to your GitHub user name
          git config --global user.email "41898282+github-actions[bot]@users.noreply.github.com" # Change to your GitHub email address
          git add "." && echo "Git added"
          git commit -m "upload" && echo "Git commited"
          git push -u origin publishment && echo "Git Pushed Origin"
